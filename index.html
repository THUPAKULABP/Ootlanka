
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NYE 2026: The Enchanted Forest</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Great+Vibes&family=Playfair+Display:wght@400;700&family=Ramabhadra&family=Montserrat:wght@300;500&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --gold: #FFD700;
            --gold-glow: #FDB931;
            --night-blue: #020510;
            --forest-deep: #051405;
            --neon-moon: #E0F7FA;
            --fire-orange: #FF4500;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            background-color: var(--night-blue); 
            font-family: 'Montserrat', sans-serif; 
            color: white; 
            overflow-x: hidden;
            overflow-y: hidden; /* Locked until intro done */
        }

        /* --- LAYERS --- */
        
        /* 1. The Giant Moon (Fixed Background) */
        .moon-layer {
            position: fixed; top: 5%; right: 10%; width: 150px; height: 150px;
            background: radial-gradient(circle, #fff, #ddd 40%, transparent 70%);
            border-radius: 50%; box-shadow: 0 0 60px rgba(255,255,255,0.3);
            z-index: -5; opacity: 0.8; mix-blend-mode: screen;
            animation: moonFloat 10s infinite alternate ease-in-out;
        }
        @keyframes moonFloat { from {transform:translateY(0);} to {transform:translateY(-20px);} }

        /* 2. Fog & Snow */
        #fog-canvas, #snow-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -4; pointer-events: none; }
        
        /* 3. The Bonfire (Fixed Bottom) */
        #fire-canvas {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 40vh;
            z-index: -1; pointer-events: none; opacity: 0.8; mix-blend-mode: screen;
        }

        /* --- UI: THE GOLDEN GATE (Language) --- */
        #gate-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000;
            background: radial-gradient(circle, #1a1a1a 0%, #000 100%);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }

        .gate-logo {
            font-family: 'Cinzel'; font-size: 3rem; color: var(--gold);
            text-shadow: 0 0 20px var(--gold-glow); margin-bottom: 40px; text-align: center;
            opacity: 0; transform: scale(0.8);
        }

        .lang-btn {
            background: transparent; border: 1px solid var(--gold); color: var(--gold);
            padding: 18px 50px; margin: 15px; font-size: 1.2rem; font-family: 'Cinzel', 'Ramabhadra';
            cursor: pointer; position: relative; overflow: hidden; transition: 0.4s;
            width: 260px; text-transform: uppercase; letter-spacing: 2px;
        }
        .lang-btn::after {
            content: ''; position: absolute; width: 0; height: 100%; top: 0; left: 0;
            background: var(--gold); z-index: -1; transition: 0.4s;
        }
        .lang-btn:hover::after { width: 100%; }
        .lang-btn:hover { color: black; box-shadow: 0 0 40px var(--gold); }

        /* --- MAIN CONTENT --- */
        #main-scroll {
            position: relative; z-index: 10; width: 100%; display: none; opacity: 0;
        }

        .container { max-width: 900px; margin: 0 auto; padding-bottom: 150px; position: relative; }

        /* The Growing Vine Line (SVG) */
        .vine-svg-container {
            position: absolute; top: 0; left: 50%; transform: translateX(-50%);
            width: 100px; height: 100%; pointer-events: none; z-index: 0;
        }
        
        /* HERO */
        .hero {
            height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; position: relative;
        }

        .vip-photo-frame {
            width: 180px; height: 180px; position: relative; margin-bottom: 20px;
            display: none; /* Hidden unless user has photo */
        }
        .vip-glow {
            position: absolute; inset: -10px; border-radius: 50%;
            background: conic-gradient(from 0deg, transparent, var(--gold), transparent);
            animation: rotateGlow 4s linear infinite;
        }
        .vip-img {
            width: 100%; height: 100%; border-radius: 50%; object-fit: cover;
            border: 2px solid var(--gold); position: relative; z-index: 2;
        }
        @keyframes rotateGlow { 100% { transform: rotate(360deg); } }

        .cinematic-title {
            font-family: 'Cinzel'; font-size: 3.5rem; line-height: 1;
            background: linear-gradient(to bottom, #fff, #C5A000); -webkit-background-clip: text; color: transparent;
            text-shadow: 0 10px 30px rgba(0,0,0,0.8); margin-bottom: 10px;
        }

        .scroll-hint {
            position: absolute; bottom: 30px; animation: pulse 2s infinite; color: var(--gold);
            font-family: 'Cinzel'; font-size: 0.8rem; letter-spacing: 3px;
        }

        /* TIMELINE SECTIONS */
        .timeline-section {
            position: relative; min-height: 400px; display: flex; align-items: center;
            justify-content: center; margin: 50px 0;
        }

        .flower-marker {
            position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%) scale(0);
            width: 60px; height: 60px; z-index: 5; filter: drop-shadow(0 0 10px var(--gold));
        }

        .content-card {
            width: 40%; background: rgba(10, 20, 15, 0.7);
            border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 15px;
            padding: 25px; backdrop-filter: blur(10px);
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            position: absolute; opacity: 0; transform: translateY(50px);
        }

        .left-card { left: 5%; text-align: right; border-right: 3px solid var(--gold); }
        .right-card { right: 5%; text-align: left; border-left: 3px solid var(--gold); }

        .card-icon { font-size: 2rem; color: var(--gold); margin-bottom: 10px; }
        .card-title { font-family: 'Cinzel'; font-size: 1.4rem; color: var(--gold); margin-bottom: 10px; }
        .card-text { font-size: 1rem; line-height: 1.6; color: #ddd; }
        .highlight { color: #81ecec; font-weight: bold; text-shadow: 0 0 5px #81ecec; }

        /* FOOTER ADMIN */
        footer { text-align: center; padding: 50px; color: #666; font-family: 'Cinzel'; font-size: 0.8rem; position: relative; z-index: 20; }

        /* ADMIN PANEL */
        #admin-panel {
            display: none; position: fixed; bottom: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 10000; padding: 30px;
        }
        .admin-box { margin-top: 100px; border: 1px solid var(--gold); padding: 20px; border-radius: 10px; }
        .inp { width: 100%; padding: 15px; margin-bottom: 15px; background: #222; border: 1px solid #444; color: white; }
        .btn { width: 100%; padding: 15px; background: var(--gold); font-weight: bold; border: none; cursor: pointer; }

        @keyframes pulse { 0%, 100% {opacity: 0.6;} 50% {opacity: 1;} }

        /* Mobile Adjustments */
        @media (max-width: 768px) {
            .cinematic-title { font-size: 2.5rem; }
            .content-card { width: 85%; position: relative; left: auto; right: auto; margin: 20px auto; text-align: center; border: 1px solid var(--gold); }
            .flower-marker { display: none; } /* Hide complex vine markers on small screens, keep content flow */
            .vine-svg-container { display: none; }
            .moon-layer { width: 100px; height: 100px; top: 2%; right: 5%; }
        }
    </style>
</head>
<body>

    <audio id="bg-music" loop>
        <source src="https://cdn.pixabay.com/download/audio/2022/11/22/audio_febc508520.mp3?filename=cinematic-documentary-125633.mp3" type="audio/mpeg">
    </audio>

    <div class="moon-layer"></div>
    <canvas id="snow-canvas"></canvas>
    <canvas id="fire-canvas"></canvas>

    <div id="gate-screen">
        <div class="gate-logo">OOTLANKA<br>2026</div>
        <p style="color:#aaa; font-family:'Montserrat'; letter-spacing:2px; margin-bottom:20px;">TURN UP VOLUME & ENTER</p>
        <button class="lang-btn" onclick="startCinema('en')">English</button>
        <button class="lang-btn" onclick="startCinema('te')">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</button>
    </div>

    <div id="main-scroll">
        <div class="container" id="scroll-container">
            
            <div class="vine-svg-container">
                <svg width="100" height="2500" viewBox="0 0 100 2500" fill="none">
                    <path id="vine-path" d="M50 0 L50 2500" stroke="#FFD700" stroke-width="2" stroke-dasharray="2500" stroke-dashoffset="2500"/>
                </svg>
            </div>

            <section class="hero">
                <div class="vip-photo-frame" id="vip-frame">
                    <div class="vip-glow"></div>
                    <img id="vip-img" class="vip-img" src="" alt="Guest">
                </div>
                
                <p id="welcome-txt" style="color:var(--gold); font-family:'Great Vibes'; font-size:2rem; margin-bottom:10px;"></p>
                <h1 class="cinematic-title">MIDNIGHT<br>FOREST SAGA</h1>
                <p style="letter-spacing:2px; opacity:0.8; margin-top:10px;">Dec 31 ‚Ä¢ Ootlanka Forest ‚Ä¢ Munirathna Farm</p>
                
                <div class="scroll-hint">SCROLL TO BEGIN JOURNEY</div>
            </section>

            <div class="timeline-section">
                <svg class="flower-marker" viewBox="0 0 100 100" fill="none"><circle cx="50" cy="50" r="40" fill="#FFD700" opacity="0.8"/><circle cx="50" cy="50" r="20" fill="#FFF"/></svg>
                
                <div class="content-card left-card">
                    <div class="card-icon">üöú</div>
                    <h3 class="card-title" id="t-journey">THE GRAND JOURNEY</h3>
                    <div class="card-text">
                        <p id="c-bike">üèçÔ∏è Park bikes at Venkojigaripalle.</p>
                        <p id="c-tractor" class="highlight" style="margin-top:10px;">THE TRACTOR CONVOY: All 20 members in ONE vehicle. Village to Forest. The cinematic ride begins here!</p>
                    </div>
                </div>
            </div>

            <div class="timeline-section">
                <svg class="flower-marker" viewBox="0 0 100 100" fill="none"><circle cx="50" cy="50" r="40" fill="#FF4500" opacity="0.8"/><circle cx="50" cy="50" r="20" fill="#FFF"/></svg>
                
                <div class="content-card right-card">
                    <div class="card-icon">üî•</div>
                    <h3 class="card-title" id="t-feast">FOREST FEAST</h3>
                    <div class="card-text">
                        <p id="c-cook1"><b>7:30 PM:</b> Wood fire cooking (Chapati & Chicken/Veg).</p>
                        <p id="c-dinner" style="margin-top:10px;"><b>9:45 PM:</b> A Grand Dinner by the bonfire under the moonlight.</p>
                    </div>
                </div>
            </div>

            <div class="timeline-section">
                <svg class="flower-marker" viewBox="0 0 100 100" fill="none"><circle cx="50" cy="50" r="40" fill="#E0F7FA" opacity="0.8"/><circle cx="50" cy="50" r="20" fill="#FFF"/></svg>
                
                <div class="content-card left-card">
                    <div class="card-icon">üé§</div>
                    <h3 class="card-title" id="t-party">THE SPECTACLE</h3>
                    <div class="card-text">
                        <p id="c-party">
                            <b>10:30 PM:</b> DJ Lights & Generator ON.<br>
                            <span class="highlight">OPEN MIC:</span> Songs, Dance, and sharing our 2025 Heart Stories (Sad & Happy).
                        </p>
                    </div>
                </div>
            </div>

            <div class="timeline-section">
                <svg class="flower-marker" viewBox="0 0 100 100" fill="none"><circle cx="50" cy="50" r="40" fill="#FFD700" opacity="0.8"/><circle cx="50" cy="50" r="20" fill="#FFF"/></svg>
                
                <div class="content-card right-card">
                    <div class="card-icon">üéÜ</div>
                    <h3 class="card-title" id="t-mid">2026 AWAKENING</h3>
                    <div class="card-text">
                        <p id="c-cake" style="font-size:1.2rem; color:var(--gold);">12:00 AM: CAKE CUTTING!</p>
                        <p id="c-cook2" style="margin-top:10px; border-top:1px solid rgba(255,215,0,0.3); padding-top:10px;">
                            <b>ROUND 2:</b> 2 Big Country Chickens (12kg). Biryani & Pakoda cooking continues until Sunrise (6 AM).
                        </p>
                    </div>
                </div>
            </div>

            <div class="timeline-section">
                 <div class="content-card" style="width:80%; position:relative; transform:none; left:auto; right:auto; border-color:red; text-align:center;">
                    <div class="card-icon">‚ö†Ô∏è</div>
                    <h3 class="card-title" style="color:red" id="t-rules">IMPORTANT DECREE</h3>
                    <p class="card-text" id="c-strict">Strictly No Fighting, No Bullying, No Over Drinking.</p>
                    <p class="card-text" id="c-fee" style="margin-top:5px; color:#aaa;">Entry: Min Rs. 300.</p>
                </div>
            </div>

            <footer id="admin-trigger">
                ¬© 2026 Ootlanka Friends
            </footer>
        </div>
    </div>

    <div id="admin-panel">
        <div class="admin-box">
            <h2 style="color:var(--gold);">VIP ADMIN</h2>
            <p style="color:#aaa;">Name:</p>
            <input type="text" id="a-name" class="inp" placeholder="Name">
            <p style="color:#aaa;">Photo:</p>
            <input type="file" id="a-photo" class="inp" accept="image/*">
            <div id="c-msg" style="color:#00ff9d;"></div>
            <button class="btn" onclick="genLink()">GENERATE LINK</button>
            <div id="res-box" style="display:none; margin-top:20px;">
                <textarea id="f-link" class="inp" style="height:80px;"></textarea>
                <button class="btn" style="background:#333; color:white;" onclick="copyL()">COPY</button>
            </div>
            <button onclick="document.getElementById('admin-panel').style.display='none'" style="margin-top:20px; background:none; border:none; color:#888; width:100%;">Close</button>
        </div>
    </div>

    <script>
        // --- 1. CONTENT ---
        const txt = {
            en: {
                wel: "Welcome,",
                jour: "THE GRAND JOURNEY",
                bike: "üèçÔ∏è Park bikes at Venkojigaripalle.",
                trac: "THE TRACTOR CONVOY: All 20 members in ONE vehicle. Village to Forest. The cinematic ride begins here!",
                feast: "FOREST FEAST",
                cook1: "<b>7:30 PM:</b> Wood fire cooking (Chapati & Chicken/Veg).",
                din: "<b>9:45 PM:</b> A Grand Dinner by the bonfire under the moonlight.",
                party: "THE SPECTACLE",
                p_desc: "<b>10:30 PM:</b> DJ Lights & Generator ON.<br><span class='highlight'>OPEN MIC:</span> Songs, Dance, and sharing our 2025 Heart Stories (Sad & Happy).",
                mid: "2026 AWAKENING",
                cake: "12:00 AM: CAKE CUTTING!",
                cook2: "<b>ROUND 2:</b> 2 Big Country Chickens (12kg). Biryani & Pakoda cooking continues until Sunrise (6 AM).",
                rules: "IMPORTANT DECREE",
                strict: "Strictly No Fighting, No Bullying, No Over Drinking.",
                fee: "Entry: Min Rs. 300."
            },
            te: {
                wel: "‡∞∏‡±ç‡∞µ‡∞æ‡∞ó‡∞§‡∞Ç,",
                jour: "‡∞∞‡∞æ‡∞ú‡±ã‡∞ö‡∞ø‡∞§ ‡∞™‡±ç‡∞∞‡∞Ø‡∞æ‡∞£‡∞Ç",
                bike: "üèçÔ∏è ‡∞¨‡±à‡∞ï‡±ç ‡∞™‡∞æ‡∞∞‡±ç‡∞ï‡∞ø‡∞Ç‡∞ó‡±ç: ‡∞µ‡±Ü‡∞Ç‡∞ï‡±ã‡∞ú‡∞ø‡∞ó‡∞æ‡∞∞‡∞ø‡∞™‡∞≤‡±ç‡∞≤‡±Ü.",
                trac: "üöú ‡∞ü‡±ç‡∞∞‡∞æ‡∞ï‡±ç‡∞ü‡∞∞‡±ç ‡∞Ø‡∞æ‡∞§‡±ç‡∞∞: ‡∞Æ‡∞®‡∞Æ‡∞Ç‡∞¶‡∞∞‡∞Ç ‡∞í‡∞ï‡±á ‡∞ü‡±ç‡∞∞‡∞æ‡∞ï‡±ç‡∞ü‡∞∞‡±ç‡∞≤‡±ã.. ‡∞ä‡∞∞‡∞ø ‡∞®‡±Å‡∞Ç‡∞°‡∞ø ‡∞Ö‡∞°‡∞µ‡∞ø‡∞ï‡∞ø! ‡∞∏‡∞ø‡∞®‡∞ø‡∞Æ‡∞æ ‡∞∞‡±á‡∞Ç‡∞ú‡±ç ‡∞≤‡±ã ‡∞â‡∞Ç‡∞ü‡±Å‡∞Ç‡∞¶‡∞ø!",
                feast: "‡∞µ‡∞® ‡∞µ‡∞ø‡∞Ç‡∞¶‡±Å",
                cook1: "<b>7:30 PM:</b> ‡∞µ‡∞Ç‡∞ü ‡∞Æ‡±ä‡∞¶‡∞≤‡±Å (‡∞ö‡∞™‡∞æ‡∞§‡±Ä & ‡∞®‡∞æ‡∞ü‡±Å ‡∞ï‡±ã‡∞°‡∞ø).",
                din: "<b>9:45 PM:</b> ‡∞µ‡±Ü‡∞®‡±ç‡∞®‡±Ü‡∞≤ ‡∞µ‡±Ü‡∞≤‡±Å‡∞ó‡±Å‡∞≤‡±ã, ‡∞Æ‡∞Ç‡∞ü ‡∞Æ‡±Å‡∞Ç‡∞¶‡±Å ‡∞≠‡±ã‡∞ú‡∞®‡∞Ç.",
                party: "‡∞∏‡∞Ç‡∞¨‡∞∞‡∞æ‡∞≤‡±Å",
                p_desc: "<b>10:30 PM:</b> DJ ‡∞≤‡±à‡∞ü‡±ç‡∞≤‡±Å & ‡∞ú‡∞®‡∞∞‡±á‡∞ü‡∞∞‡±ç.<br><span class='highlight'>‡∞ì‡∞™‡±Ü‡∞®‡±ç ‡∞Æ‡±à‡∞ï‡±ç:</span> ‡∞°‡±ç‡∞Ø‡∞æ‡∞®‡±ç‡∞∏‡±ç, ‡∞™‡∞æ‡∞ü‡∞≤‡±Å.. 2025 ‡∞ï‡∞∑‡±ç‡∞ü ‡∞∏‡±Å‡∞ñ‡∞æ‡∞≤‡±Å ‡∞™‡∞Ç‡∞ö‡±Å‡∞ï‡±Å‡∞Ç‡∞¶‡∞æ‡∞Ç.",
                mid: "‡∞®‡±Ç‡∞§‡∞® ‡∞∏‡∞Ç‡∞µ‡∞§‡±ç‡∞∏‡∞∞‡∞Ç 2026",
                cake: "12:00 AM: ‡∞ï‡±á‡∞ï‡±ç ‡∞ï‡∞ü‡∞ø‡∞Ç‡∞ó‡±ç!",
                cook2: "<b>‡∞∞‡±Ü‡∞Ç‡∞°‡∞µ ‡∞∞‡±å‡∞Ç‡∞°‡±ç:</b> 2 ‡∞™‡±Ü‡∞¶‡±ç‡∞¶ ‡∞®‡∞æ‡∞ü‡±Å ‡∞ï‡±ã‡∞≥‡±ç‡∞≤‡±Å (12kg). ‡∞§‡±Ü‡∞≤‡±ç‡∞≤‡∞µ‡∞æ‡∞∞‡±ç‡∞≤‡±Å ‡∞¨‡∞ø‡∞∞‡±ç‡∞Ø‡∞æ‡∞®‡±Ä & ‡∞™‡∞ï‡±ã‡∞°‡∞æ ‡∞µ‡∞Ç‡∞°‡±Å‡∞ï‡±Å‡∞®‡∞ø ‡∞§‡∞ø‡∞®‡∞°‡∞Æ‡±á!",
                rules: "‡∞Ü‡∞ú‡±ç‡∞û‡∞≤‡±Å",
                strict: "‡∞ó‡±ä‡∞°‡∞µ‡∞≤‡±Å, ‡∞Ö‡∞§‡∞ø‡∞ó‡∞æ ‡∞§‡∞æ‡∞ó‡∞°‡∞Ç, ‡∞π‡±á‡∞≥‡∞® ‡∞ö‡±á‡∞Ø‡∞°‡∞Ç ‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø‡∞ó‡∞æ ‡∞®‡∞ø‡∞∑‡±á‡∞ß‡∞Ç.",
                fee: "‡∞é‡∞Ç‡∞ü‡±ç‡∞∞‡±Ä: ‡∞∞‡±Ç. 300 (‡∞ï‡∞®‡±Ä‡∞∏‡∞Ç)."
            }
        };

        let compressed = "";

        // --- 2. STARTUP LOGIC ---
        function startCinema(lang) {
            // Audio
            const music = document.getElementById('bg-music');
            music.volume = 0.6;
            music.play();

            // Set Data
            const t = txt[lang];
            const p = new URLSearchParams(window.location.search);
            
            if(p.get('guest')) document.getElementById('welcome-txt').innerText = t.wel + " " + decodeURIComponent(p.get('guest'));
            if(p.get('pic')) {
                document.getElementById('vip-frame').style.display = 'block';
                document.getElementById('vip-img').src = decodeURIComponent(p.get('pic'));
            }

            document.getElementById('t-journey').innerText = t.jour;
            document.getElementById('c-bike').innerText = t.bike;
            document.getElementById('c-tractor').innerHTML = t.trac;
            document.getElementById('t-feast').innerText = t.feast;
            document.getElementById('c-cook1').innerHTML = t.cook1;
            document.getElementById('c-dinner').innerHTML = t.din;
            document.getElementById('t-party').innerText = t.party;
            document.getElementById('c-party').innerHTML = t.p_desc;
            document.getElementById('t-mid').innerText = t.mid;
            document.getElementById('c-cake').innerHTML = t.cake;
            document.getElementById('c-cook2').innerHTML = t.cook2;
            document.getElementById('t-rules').innerText = t.rules;
            document.getElementById('c-strict').innerText = t.strict;
            document.getElementById('c-fee').innerText = t.fee;

            // Transition
            gsap.to('.gate-logo', { scale: 5, opacity: 0, duration: 1 });
            gsap.to('#gate-screen', { opacity: 0, duration: 1.5, delay: 0.5, onComplete: () => {
                document.getElementById('gate-screen').style.display = 'none';
                document.body.style.overflowY = 'auto';
                document.getElementById('main-scroll').style.display = 'block';
                
                initMainAnimations();
            }});
        }

        window.onload = () => {
            gsap.to('.gate-logo', { opacity: 1, scale: 1, duration: 1.5, ease: "power2.out" });
            initFire();
            initSnow();
        };

        function initMainAnimations() {
            gsap.to('#main-scroll', { opacity: 1, duration: 1 });
            
            // Hero Intro
            gsap.from('.hero', { opacity: 0, y: 50, duration: 1.5, ease: "power2.out" });

            // The Growing Vine (Desktop Only)
            gsap.to("#vine-path", {
                strokeDashoffset: 0,
                scrollTrigger: {
                    trigger: "#scroll-container",
                    start: "top center",
                    end: "bottom bottom",
                    scrub: 1
                }
            });

            // Flowers Blooming & Cards Appearing
            gsap.utils.toArray('.timeline-section').forEach(section => {
                const flower = section.querySelector('.flower-marker');
                const card = section.querySelector('.content-card');
                
                const tl = gsap.timeline({
                    scrollTrigger: {
                        trigger: section,
                        start: "top 70%",
                    }
                });

                if(flower) tl.to(flower, { scale: 1, rotation: 360, duration: 0.8, ease: "back.out(1.7)" });
                tl.to(card, { y: 0, opacity: 1, duration: 0.8, ease: "power2.out" }, "-=0.4");
            });

            triggerConfetti();
        }

        // --- 3. CANVAS EFFECTS ---
        
        // Fire Canvas
        function initFire() {
            const c = document.getElementById('fire-canvas');
            const ctx = c.getContext('2d');
            c.width = window.innerWidth; c.height = window.innerHeight * 0.4;
            
            const particles = [];
            for(let i=0; i<50; i++) particles.push({
                x: Math.random()*c.width, y: c.height, s: Math.random()*20+10,
                speed: Math.random()*2+1, life: Math.random()
            });

            function anim() {
                ctx.clearRect(0,0,c.width,c.height);
                ctx.globalCompositeOperation = "lighter";
                particles.forEach(p => {
                    p.y -= p.speed; p.s *= 0.98; p.life -= 0.01;
                    if(p.life <= 0) { p.y = c.height; p.s = Math.random()*20+10; p.life = Math.random(); p.x = Math.random()*c.width; }
                    
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.s, 0, Math.PI*2);
                    const g = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.s);
                    g.addColorStop(0, "rgba(255,69,0,0.8)");
                    g.addColorStop(1, "rgba(255,140,0,0)");
                    ctx.fillStyle = g; ctx.fill();
                });
                requestAnimationFrame(anim);
            }
            anim();
        }

        // Snow Canvas
        function initSnow() {
            const c = document.getElementById('snow-canvas');
            const ctx = c.getContext('2d');
            c.width = window.innerWidth; c.height = window.innerHeight;
            const flakes = [];
            for(let i=0; i<100; i++) flakes.push({x:Math.random()*c.width, y:Math.random()*c.height, r:Math.random()*2, d:Math.random()*1});

            function draw() {
                ctx.clearRect(0,0,c.width,c.height);
                ctx.fillStyle = "rgba(255,255,255,0.6)";
                flakes.forEach(f => {
                    f.y += f.d; if(f.y>c.height) f.y=0;
                    ctx.beginPath(); ctx.arc(f.x, f.y, f.r, 0, Math.PI*2); ctx.fill();
                });
                requestAnimationFrame(draw);
            }
            draw();
        }

        function triggerConfetti() {
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 }, colors: ['#FFD700', '#FFFFFF'] });
        }

        // --- 4. ADMIN ---
        let clicks = 0;
        document.getElementById('admin-trigger').addEventListener('click', () => {
            clicks++; if(clicks===3){document.getElementById('admin-panel').style.display='block'; clicks=0;}
            setTimeout(()=>clicks=0, 2000);
        });

        document.getElementById('a-photo').addEventListener('change', function(e) {
            const f = e.target.files[0]; if(!f) return;
            document.getElementById('c-msg').innerText = "Compressing...";
            const r = new FileReader(); r.readAsDataURL(f);
            r.onload = function(ev) {
                const i = new Image(); i.src = ev.target.result;
                i.onload = function() {
                    const c = document.createElement('canvas');
                    const m = 200; let w=i.width, h=i.height;
                    if(w>h){if(w>m){h*=m/w;w=m}}else{if(h>m){w*=m/h;h=m}}
                    c.width=w; c.height=h; c.getContext('2d').drawImage(i,0,0,w,h);
                    compressed = c.toDataURL('image/jpeg', 0.6);
                    document.getElementById('c-msg').innerText = "Ready!";
                }
            }
        });

        function genLink() {
            const n = document.getElementById('a-name').value;
            let u = window.location.href.split('?')[0] + `?guest=${encodeURIComponent(n)}`;
            if(compressed) u += `&pic=${encodeURIComponent(compressed)}`;
            document.getElementById('res-box').style.display='block';
            document.getElementById('f-link').value = u;
        }

        function copyL() {
            document.getElementById('f-link').select(); document.execCommand('copy'); alert("Copied!");
        }

    </script>
</body>
</html>
