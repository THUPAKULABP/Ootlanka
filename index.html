
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Ootlanka Saga 2026</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700;900&family=Ramabhadra&family=Great+Vibes&family=Montserrat:wght@300;600&family=Playfair+Display:ital,wght@1,700&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --gold: #FFD700;
            --gold-glow: rgba(255, 215, 0, 0.6);
            --jungle-dark: #020a05;
            --fire: #ff4d00;
            --ice: #e0f7fa;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            background-color: var(--jungle-dark); 
            color: white; 
            font-family: 'Montserrat', sans-serif; 
            overflow: hidden; /* Locked for intro */
        }

        /* --- BACKGROUND SCENERY --- */
        #snow-canvas, #fire-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
        .moon { 
            position: fixed; top: 50px; right: 50px; width: 100px; height: 100px; 
            background: radial-gradient(circle, #fff 0%, #aaa 100%); 
            border-radius: 50%; box-shadow: 0 0 60px var(--ice); 
            z-index: -2; opacity: 0.8; 
        }

        /* --- VINE DECORATION --- */
        .vine-corner {
            position: fixed; top: 0; width: 200px; height: 200px; 
            background-image: url('https://www.transparentpng.com/download/leaves/green-leaves-png-images-9.png');
            background-size: contain; background-repeat: no-repeat;
            z-index: 2000; pointer-events: none; opacity: 0.6; filter: brightness(0.5) sepia(1) hue-rotate(10deg);
        }
        .v-left { left: 0; transform: rotate(-10deg); }
        .v-right { right: 0; transform: scaleX(-1) rotate(-10deg); }

        /* --- SCENE 1: THE ROYAL ENVELOPE --- */
        #intro-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 10000; display: flex;
            justify-content: center; align-items: center; flex-direction: column;
        }

        .envelope {
            width: 300px; height: 200px; background: #111;
            border: 2px solid var(--gold); position: relative;
            transform-style: preserve-3d; cursor: pointer;
            box-shadow: 0 25px 50px rgba(0,0,0,0.8);
            border-radius: 10px; transition: transform 0.5s;
        }

        .envelope:active { transform: scale(0.95); }

        .wax-seal {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 70px; height: 70px; background: radial-gradient(circle, #b00, #500);
            border-radius: 50%; border: 3px solid var(--gold); z-index: 10;
            display: flex; justify-content: center; align-items: center;
            font-family: 'Great Vibes'; color: var(--gold); font-size: 1.8rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .tap-msg {
            margin-top: 40px; font-family: 'Cinzel Decorative'; color: var(--gold);
            letter-spacing: 3px; animation: pulse 2s infinite; text-align: center;
        }

        /* --- SCENE 2: LANGUAGE GATE --- */
        #language-gate {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 9000; display: none;
            flex-direction: column; justify-content: center; align-items: center;
            backdrop-filter: blur(20px);
        }

        .gate-title {
            font-family: 'Cinzel Decorative'; font-size: 1.8rem; color: #fff;
            margin-bottom: 40px; text-align: center; padding: 0 20px;
        }

        .lang-btn {
            background: transparent; border: 2px solid var(--gold); color: var(--gold);
            padding: 20px 50px; margin: 15px; font-size: 1.4rem;
            font-family: 'Ramabhadra', 'Cinzel Decorative'; cursor: pointer;
            transition: 0.4s; width: 280px; border-radius: 5px;
            text-transform: uppercase;
        }
        .lang-btn:hover { background: var(--gold); color: black; box-shadow: 0 0 40px var(--gold); }

        /* --- SCENE 3: MAIN APP --- */
        #main-content {
            position: relative; z-index: 10; display: none; opacity: 0;
            padding-bottom: 100px;
        }

        .hero {
            height: 100vh; display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center;
            padding: 20px;
        }

        .vip-photo-circle {
            width: 180px; height: 180px; border-radius: 50%;
            border: 4px solid var(--gold); position: relative;
            margin-bottom: 25px; display: none;
            box-shadow: 0 0 30px var(--gold-glow);
        }
        .vip-photo-circle img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }

        .cinematic-title {
            font-family: 'Cinzel Decorative'; font-size: 3rem;
            background: linear-gradient(to bottom, #fff, var(--gold));
            -webkit-background-clip: text; color: transparent;
            text-shadow: 0 10px 20px rgba(0,0,0,0.5);
            margin-bottom: 15px; line-height: 1.1;
        }

        /* JOURNEY CARDS */
        .card {
            background: rgba(0, 15, 5, 0.85); border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 25px; padding: 30px; margin: 40px 20px;
            backdrop-filter: blur(10px); position: relative;
            transform: translateY(100px); opacity: 0;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
        }

        .card.visible { transform: translateY(0); opacity: 1; transition: 1s ease-out; }

        .flower-icon {
            position: absolute; left: -20px; top: -20px; font-size: 2.5rem;
            filter: drop-shadow(0 0 10px var(--gold));
        }

        .card-h { font-family: 'Cinzel Decorative'; font-size: 1.5rem; color: var(--gold); margin-bottom: 15px; }
        .card-p { font-size: 1.05rem; line-height: 1.7; color: #ddd; }
        .accent { color: #00ffcc; font-weight: bold; }

        /* --- ADMIN PANEL --- */
        #admin-panel {
            display: none; position: fixed; bottom: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 20000; padding: 30px; overflow-y: auto;
        }
        .adm-input { width: 100%; padding: 15px; margin-bottom: 15px; background: #111; border: 1px solid #444; color: white; border-radius: 5px; }
        .adm-btn { width: 100%; padding: 15px; background: var(--gold); font-weight: bold; cursor: pointer; border-radius: 5px; border: none; }

        footer { text-align: center; padding: 50px; color: #444; font-family: 'Cinzel Decorative'; cursor: pointer; }

        @keyframes pulse { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }

        @media (max-width: 600px) {
            .cinematic-title { font-size: 2.2rem; }
            .card { padding: 20px; margin: 30px 15px; }
        }
    </style>
</head>
<body>

    <audio id="bgm-audio" loop>
        <source src="https://cdn.pixabay.com/download/audio/2022/10/25/audio_10842a2754.mp3?filename=dark-mystery-trailer-115629.mp3" type="audio/mpeg">
    </audio>
    <audio id="sfx-magic">
        <source src="https://cdn.pixabay.com/download/audio/2022/03/24/audio_3d15442656.mp3?filename=magic-spell-6005.mp3" type="audio/mpeg">
    </audio>

    <div class="moon"></div>
    <div class="vine-corner v-left"></div>
    <div class="vine-corner v-right"></div>
    <canvas id="snow-canvas"></canvas>
    <canvas id="fire-canvas"></canvas>

    <div id="intro-overlay">
        <div class="envelope" onclick="openEnvelope()">
            <div class="wax-seal">2026</div>
        </div>
        <div class="tap-msg">YOUR ROYAL INVITATION<br>TAP TO OPEN</div>
    </div>

    <div id="language-gate">
        <h2 class="gate-title">CHOOSE YOUR LANGUAGE EXPERIENCE</h2>
        <button class="lang-btn" onclick="setLanguage('en')">English</button>
        <button class="lang-btn" onclick="setLanguage('te')">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</button>
    </div>

    <div id="main-content">
        <div class="container">
            
            <section class="hero">
                <div class="vip-photo-circle" id="vip-frame">
                    <img id="vip-photo" src="" alt="Guest VIP">
                </div>
                
                <p id="guest-welcome" style="color:var(--gold); font-family:'Great Vibes'; font-size:2rem; margin-bottom:10px;"></p>
                <h1 class="cinematic-title">FOREST PARTY<br>SAGA 2026</h1>
                <p style="letter-spacing:5px; font-size:0.8rem; opacity:0.7;">OOTLANKA | DEC 31</p>
                
                <div style="margin-top:60px; color:var(--gold); animation:pulse 2s infinite;">
                    SCROLL TO DISCOVER THE PLAN ‚Üì
                </div>
            </section>

            <div class="card">
                <div class="flower-icon">üå∏</div>
                <h2 class="card-h" id="h-jour">THE PILGRIMAGE</h2>
                <div class="card-p">
                    <p id="p-bike">Bikes park at Venkojigaripalle Village (Friends' homes).</p>
                    <p id="p-trac" class="accent" style="margin-top:10px;">THE TRACTOR CONVOY: 20 Souls. ONE Tractor. Village to Forest. The legend begins with this ride!</p>
                </div>
            </div>

            <div class="card">
                <div class="flower-icon">üå∫</div>
                <h2 class="card-h" id="h-cook">WINTER FEAST</h2>
                <div class="card-p">
                    <p id="p-cook1">7:30 PM: Wood-fire cooking begins (Fresh Chapati & Chicken/Veg Curry).</p>
                    <p id="p-dine" style="margin-top:10px;">9:45 PM: The Grand Forest Dinner under the moon.</p>
                </div>
            </div>

            <div class="card">
                <div class="flower-icon">üåª</div>
                <h2 class="card-h" id="h-party">THE SPECTACLE</h2>
                <div class="card-p" id="p-mic">
                    10:30 PM: DJ Lights & Generator Glow.<br>
                    <span class="accent">OPEN MIC:</span> Sharing our 2025 life stories‚Äîthe happy, the sad, and the memories‚Äîwith Music & Dance!
                </div>
            </div>

            <div class="card" style="border-top-color: white;">
                <div class="flower-icon">‚ú®</div>
                <h2 class="card-h" id="h-nye">THE AWAKENING (2026)</h2>
                <div class="card-p">
                    <p id="p-cake" style="font-size:1.4rem; color:var(--gold); font-family:'Cinzel Decorative';">12:00 AM: CAKE CUTTING!</p>
                    <p id="p-cook2" style="margin-top:15px; border-top:1px dashed rgba(255,215,0,0.3); padding-top:15px;">
                        <b>ROUND 2:</b> 2 Big Country Chickens (12kg). Cooking Biryani & Pakoda deep into the night until 6:00 AM.
                    </p>
                </div>
            </div>

            <div class="card" style="border-top: 4px solid red;">
                <h2 class="card-h" style="color:red" id="h-rules">THE COMMANDMENTS</h2>
                <div class="card-p">
                    <p id="p-rules">Strictly No Over-drinking, No Fighting, No Bullying. Pure Brotherhood Only.</p>
                    <p id="p-fee" style="margin-top:10px; color:var(--gold);">Entry: Min Rs. 300 (Maximum is your choice).</p>
                </div>
            </div>

            <footer id="admin-trigger">
                ¬© 2026 OOTLANKA FRIENDS
            </footer>
        </div>
    </div>

    <div id="admin-panel">
        <h2 style="color:var(--gold); margin-bottom:20px;">Invitation Generator</h2>
        <input type="text" id="adm-name" class="adm-input" placeholder="Guest Name">
        <input type="file" id="adm-photo" class="adm-input" accept="image/*">
        <div id="adm-status" style="color:var(--gold); margin-bottom:10px;"></div>
        <button class="adm-btn" onclick="generateInvite()">Generate Magical Link</button>
        <div id="adm-result" style="display:none; margin-top:20px;">
            <p style="color:white;">Copy Link:</p>
            <textarea id="adm-url" class="adm-input" style="height:80px;"></textarea>
            <button class="adm-btn" style="background:#444; color:white;" onclick="copyInvite()">Copy to Clipboard</button>
        </div>
        <button onclick="document.getElementById('admin-panel').style.display='none'" style="margin-top:20px; color:#888; background:none; border:none; width:100%;">Close Admin</button>
    </div>

    <script>
        const content = {
            en: {
                wel: "Welcome, ",
                h_jour: "THE PILGRIMAGE",
                p_bike: "Bikes park at Venkojigaripalle Village (Friends' homes).",
                p_trac: "THE TRACTOR CONVOY: 20 Members. ONE Tractor. Village to Ootlanka. Maximum Thrill!",
                h_cook: "WINTER FEAST",
                p_cook1: "7:30 PM: Wood-fire cooking begins (Fresh Chapati & Chicken/Veg Curry).",
                p_dine: "9:45 PM: The Grand Forest Dinner under the moon.",
                h_party: "THE SPECTACLE",
                p_mic: "10:30 PM: DJ Lights & Generator Glow.<br><span class='accent'>OPEN MIC:</span> Sharing our 2025 life stories‚Äîthe happy, the sad, and the memories‚Äîwith Music & Dance!",
                h_nye: "THE AWAKENING (2026)",
                p_cake: "12:00 AM: CAKE CUTTING!",
                p_cook2: "<b>ROUND 2:</b> 2 Big Country Chickens (12kg). Cooking Biryani & Pakoda until 6:00 AM Sunrise.",
                h_rules: "THE COMMANDMENTS",
                p_rules: "Strictly No Over-drinking, No Fighting, No Bullying. Pure Brotherhood Only.",
                p_fee: "Entry: Min Rs. 300 (Max is your choice)."
            },
            te: {
                wel: "‡∞∏‡±ç‡∞µ‡∞æ‡∞ó‡∞§‡∞Ç, ",
                h_jour: "‡∞™‡±ç‡∞∞‡∞Ø‡∞æ‡∞£‡∞Ç - ‡∞™‡±ç‡∞≤‡∞æ‡∞®‡±ç",
                p_bike: "‡∞Æ‡∞® ‡∞¨‡±à‡∞ï‡±ç‚Äå‡∞≤‡∞®‡∞ø ‡∞µ‡±Ü‡∞Ç‡∞ï‡±ã‡∞ú‡∞ø‡∞ó‡∞æ‡∞∞‡∞ø‡∞™‡∞≤‡±ç‡∞≤‡±Ü‡∞≤‡±ã ‡∞∏‡±ç‡∞®‡±á‡∞π‡∞ø‡∞§‡±Å‡∞≤ ‡∞á‡∞≥‡±ç‡∞≤‡∞≤‡±ã ‡∞™‡±Ü‡∞ü‡±ç‡∞ü‡∞æ‡∞≤‡∞ø.",
                p_trac: "‡∞ü‡±ç‡∞∞‡∞æ‡∞ï‡±ç‡∞ü‡∞∞‡±ç ‡∞Ø‡∞æ‡∞§‡±ç‡∞∞: ‡∞Ö‡∞Ç‡∞¶‡∞∞‡∞Ç ‡∞í‡∞ï‡±á ‡∞ü‡±ç‡∞∞‡∞æ‡∞ï‡±ç‡∞ü‡∞∞‡±ç‡∞≤‡±ã.. ‡∞Ö‡∞°‡∞µ‡∞ø‡∞ï‡∞ø ‡∞™‡∞Ø‡∞®‡∞Ç! ‡∞Æ‡∞ú‡∞æ ‡∞Æ‡∞æ‡∞Æ‡±Ç‡∞≤‡±Å‡∞ó‡∞æ ‡∞â‡∞Ç‡∞°‡∞¶‡±Å!",
                h_cook: "‡∞µ‡∞® ‡∞µ‡∞ø‡∞Ç‡∞¶‡±Å",
                p_cook1: "7:30 PM: ‡∞µ‡∞Ç‡∞ü ‡∞Æ‡±ä‡∞¶‡∞≤‡±Å (‡∞ï‡∞ü‡±ç‡∞ü‡±Ü‡∞≤ ‡∞™‡±ä‡∞Ø‡±ç‡∞Ø‡∞ø ‡∞Æ‡±Ä‡∞¶ ‡∞ö‡∞™‡∞æ‡∞§‡±Ä & ‡∞®‡∞æ‡∞ü‡±Å ‡∞ï‡±ã‡∞°‡∞ø).",
                p_dine: "9:45 PM: ‡∞Ö‡∞Ç‡∞¶‡∞∞‡∞Ç ‡∞ï‡∞≤‡∞ø‡∞∏‡∞ø ‡∞µ‡∞® ‡∞≠‡±ã‡∞ú‡∞®‡∞Ç.",
                h_party: "‡∞∏‡∞Ç‡∞¨‡∞∞‡∞æ‡∞≤‡±Å",
                p_mic: "10:30 PM: DJ ‡∞≤‡±à‡∞ü‡±ç‡∞≤‡±Å & ‡∞ú‡∞®‡∞∞‡±á‡∞ü‡∞∞‡±ç ‡∞Ü‡∞®‡±ç.<br><span class='accent'>‡∞ì‡∞™‡±Ü‡∞®‡±ç ‡∞Æ‡±à‡∞ï‡±ç:</span> ‡∞°‡±ç‡∞Ø‡∞æ‡∞®‡±ç‡∞∏‡±ç, ‡∞™‡∞æ‡∞ü‡∞≤‡±Å.. 2025 ‡∞Æ‡∞® ‡∞ï‡∞∑‡±ç‡∞ü ‡∞∏‡±Å‡∞ñ‡∞æ‡∞≤‡±Å ‡∞Æ‡±à‡∞ï‡±ç ‡∞≤‡±ã ‡∞™‡∞Ç‡∞ö‡±Å‡∞ï‡±Å‡∞Ç‡∞¶‡∞æ‡∞Ç.",
                h_nye: "‡∞®‡±Ç‡∞§‡∞® ‡∞∏‡∞Ç‡∞µ‡∞§‡±ç‡∞∏‡∞∞‡∞Ç 2026",
                p_cake: "12:00 AM: ‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞∏‡∞Ç‡∞µ‡∞§‡±ç‡∞∏‡∞∞‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞ï‡±á‡∞ï‡±ç ‡∞ï‡∞ü‡∞ø‡∞Ç‡∞ó‡±ç!",
                p_cook2: "<b>‡∞∞‡±Ü‡∞Ç‡∞°‡∞µ ‡∞∞‡±å‡∞Ç‡∞°‡±ç:</b> 2 ‡∞™‡±Ü‡∞¶‡±ç‡∞¶ ‡∞®‡∞æ‡∞ü‡±Å ‡∞ï‡±ã‡∞≥‡±ç‡∞≤‡±Å (12kg). ‡∞§‡±Ü‡∞≤‡±ç‡∞≤‡∞µ‡∞æ‡∞∞‡±ç‡∞≤‡±Å ‡∞¨‡∞ø‡∞∞‡±ç‡∞Ø‡∞æ‡∞®‡±Ä & ‡∞™‡∞ï‡±ã‡∞°‡∞æ ‡∞µ‡∞Ç‡∞°‡±Å‡∞ï‡±Å‡∞®‡∞ø ‡∞§‡∞ø‡∞®‡∞°‡∞Æ‡±á!",
                h_rules: "‡∞®‡∞ø‡∞Ø‡∞Æ‡∞æ‡∞≤‡±Å",
                p_rules: "‡∞ó‡±ä‡∞°‡∞µ‡∞≤‡±Å, ‡∞π‡±á‡∞≥‡∞®‡∞≤‡±Å, ‡∞Ö‡∞§‡∞ø‡∞ó‡∞æ ‡∞§‡∞æ‡∞ó‡∞°‡∞Ç ‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø‡∞ó‡∞æ ‡∞®‡∞ø‡∞∑‡±á‡∞ß‡∞Ç. ‡∞ó‡±å‡∞∞‡∞µ‡∞Ç‡∞ó‡∞æ ‡∞™‡∞æ‡∞∞‡±ç‡∞ü‡±Ä ‡∞ö‡±á‡∞∏‡±Å‡∞ï‡±Å‡∞Ç‡∞¶‡∞æ‡∞Ç.",
                p_fee: "‡∞ö‡∞Ç‡∞¶‡∞æ: ‡∞ï‡∞®‡±Ä‡∞∏‡∞Ç ‡∞∞‡±Ç. 300 (‡∞Æ‡±Ä ‡∞á‡∞∑‡±ç‡∞ü‡∞Ç)."
            }
        };

        let compressedImg = "";

        // --- ENVELOPE OPEN ---
        function openEnvelope() {
            document.getElementById('sfx-magic').play();
            gsap.to('.envelope', { scale: 0.8, duration: 0.2 });
            gsap.to('.envelope', { scale: 1.2, opacity: 0, duration: 0.5, delay: 0.2 });
            gsap.to('#intro-overlay', { opacity: 0, duration: 1, delay: 0.4, onComplete: () => {
                document.getElementById('intro-overlay').style.display = 'none';
                document.getElementById('language-gate').style.display = 'flex';
                gsap.from('.lang-btn', { y: 50, opacity: 0, stagger: 0.2, duration: 0.8 });
            }});
        }

        // --- LANGUAGE SET ---
        function setLanguage(lang) {
            // Audio Start
            const bgm = document.getElementById('bgm-audio');
            bgm.volume = 0.5;
            bgm.play();

            const t = content[lang];
            const urlParams = new URLSearchParams(window.location.search);
            const guest = urlParams.get('guest');
            const pic = urlParams.get('pic');

            if(guest) document.getElementById('guest-welcome').innerText = t.wel + decodeURIComponent(guest);
            if(pic) {
                document.getElementById('vip-frame').style.display = 'block';
                document.getElementById('vip-photo').src = decodeURIComponent(pic);
            }

            // Text mapping
            document.getElementById('h-jour').innerText = t.h_jour;
            document.getElementById('p-bike').innerText = t.p_bike;
            document.getElementById('p-trac').innerHTML = t.p_trac;
            document.getElementById('h-cook').innerText = t.h_cook;
            document.getElementById('p-cook1').innerHTML = t.p_cook1;
            document.getElementById('p-dine').innerHTML = t.p_dine;
            document.getElementById('h-party').innerText = t.h_party;
            document.getElementById('p-mic').innerHTML = t.p_mic;
            document.getElementById('h-nye').innerText = t.h_nye;
            document.getElementById('p-cake').innerHTML = t.p_cake;
            document.getElementById('p-cook2').innerHTML = t.p_cook2;
            document.getElementById('h-rules').innerText = t.h_rules;
            document.getElementById('p-rules').innerText = t.p_rules;
            document.getElementById('p-fee').innerText = t.p_fee;

            // Transition out language gate
            gsap.to('#language-gate', { opacity: 0, duration: 0.8, onComplete: () => {
                document.getElementById('language-gate').style.display = 'none';
                document.body.style.overflow = 'auto'; // UNLOCK SCROLL
                const main = document.getElementById('main-content');
                main.style.display = 'block';
                gsap.to(main, { opacity: 1, duration: 1.5 });
                triggerCardAnimations();
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 }, colors: ['#FFD700', '#ffffff'] });
            }});
        }

        function triggerCardAnimations() {
            gsap.utils.toArray('.card').forEach(card => {
                ScrollTrigger.create({
                    trigger: card,
                    start: "top 85%",
                    onEnter: () => card.classList.add('visible')
                });
            });
        }

        // --- CANVAS BACKGROUNDS ---
        function initFX() {
            // Snow
            const sc = document.getElementById('snow-canvas');
            const sctx = sc.getContext('2d');
            sc.width = window.innerWidth; sc.height = window.innerHeight;
            const flakes = [];
            for(let i=0; i<80; i++) flakes.push({x:Math.random()*sc.width, y:Math.random()*sc.height, r:Math.random()*3, d:Math.random()*1});

            // Fire (Simplified particles)
            const fc = document.getElementById('fire-canvas');
            const fctx = fc.getContext('2d');
            fc.width = window.innerWidth; fc.height = window.innerHeight;
            const embers = [];

            function animate() {
                sctx.clearRect(0,0,sc.width, sc.height);
                sctx.fillStyle = "white";
                sctx.beginPath();
                flakes.forEach(f => {
                    f.y += f.d; if(f.y > sc.height) f.y = 0;
                    sctx.moveTo(f.x, f.y); sctx.arc(f.x, f.y, f.r, 0, Math.PI*2);
                });
                sctx.fill();

                fctx.clearRect(0,0,fc.width, fc.height);
                if(embers.length < 40) embers.push({x:fc.width/2 + (Math.random()*100-50), y:fc.height-20, s:Math.random()*15, v:Math.random()*2});
                embers.forEach((e, i) => {
                    e.y -= e.v; e.s *= 0.96;
                    fctx.beginPath(); fctx.arc(e.x, e.y, e.s, 0, Math.PI*2);
                    fctx.fillStyle = `rgba(255, ${Math.random()*100}, 0, 0.4)`;
                    fctx.fill();
                    if(e.s < 1) embers.splice(i, 1);
                });
                requestAnimationFrame(animate);
            }
            animate();
        }
        initFX();

        // --- ADMIN ---
        let ac = 0;
        document.getElementById('admin-trigger').addEventListener('click', () => {
            ac++;
            if(ac === 3) { document.getElementById('admin-panel').style.display = 'block'; ac = 0; }
            setTimeout(() => ac = 0, 2000);
        });

        document.getElementById('adm-photo').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if(!file) return;
            document.getElementById('adm-status').innerText = "Processing Magic...";
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = function(event) {
                const img = new Image();
                img.src = event.target.result;
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const MAX = 250;
                    let w = img.width, h = img.height;
                    if(w > h) { if(w > MAX) { h *= MAX/w; w = MAX; } }
                    else { if(h > MAX) { w *= MAX/h; h = MAX; } }
                    canvas.width = w; canvas.height = h;
                    canvas.getContext('2d').drawImage(img, 0, 0, w, h);
                    compressedImg = canvas.toDataURL('image/jpeg', 0.6);
                    document.getElementById('adm-status').innerText = "Ready!";
                }
            }
        });

        function generateInvite() {
            const name = document.getElementById('adm-name').value;
            if(!name) return alert("Guest Name required");
            let url = window.location.href.split('?')[0] + `?guest=${encodeURIComponent(name)}`;
            if(compressedImg) url += `&pic=${encodeURIComponent(compressedImg)}`;
            document.getElementById('adm-result').style.display = 'block';
            document.getElementById('adm-url').value = url;
        }

        function copyInvite() {
            const copyText = document.getElementById('adm-url');
            copyText.select();
            document.execCommand("copy");
            alert("Copied!");
        }
    </script>
</body>
</html>
