
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Ootlanka Legend 2026</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700;900&family=Ramabhadra&family=Orbitron:wght@500;900&family=Great+Vibes&family=Montserrat:wght@300;600&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --gold: #FFD700;
            --deep-forest: #020a05;
            --fire-red: #ff4d00;
            --moon-glow: #e0f7fa;
            --glass: rgba(0, 20, 10, 0.8);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
        
        body { 
            background-color: var(--deep-forest); 
            color: white; 
            font-family: 'Montserrat', sans-serif; 
            overflow: hidden; /* Lock scroll for intro */
        }

        /* --- SOUND EFFECTS --- */
        #bgm, #open-sfx { display: none; }

        /* --- BACKGROUND ELEMENTS --- */
        #snow-canvas, #fire-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
        .moon { 
            position: fixed; top: 5%; right: 5%; width: 120px; height: 120px; 
            background: radial-gradient(circle, #fff, #888); 
            border-radius: 50%; box-shadow: 0 0 50px var(--moon-glow); 
            opacity: 0.6; z-index: -2; 
        }

        /* --- SCENE 1: THE INTERACTIVE ENVELOPE --- */
        #invitation-cover {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, #111, #000);
            z-index: 10000; display: flex; justify-content: center; align-items: center;
        }

        .envelope {
            width: 300px; height: 200px; background: #1a1a1a;
            border: 2px solid var(--gold); position: relative;
            transform-style: preserve-3d; cursor: pointer;
            box-shadow: 0 20px 50px rgba(0,0,0,1);
            border-radius: 5px;
        }

        .envelope-top {
            position: absolute; top: 0; left: 0; width: 0; height: 0;
            border-left: 150px solid transparent; border-right: 150px solid transparent;
            border-top: 100px solid #222; z-index: 2; transform-origin: top;
            transition: transform 0.6s;
        }

        .seal {
            position: absolute; top: 70px; left: 120px; width: 60px; height: 60px;
            background: radial-gradient(circle, #ff0000, #600);
            border-radius: 50%; z-index: 3; border: 2px solid var(--gold);
            display: flex; justify-content: center; align-items: center;
            font-family: 'Great Vibes'; color: var(--gold); font-size: 1.5rem;
        }

        .envelope.open .envelope-top { transform: rotateX(180deg); }

        .btn-open-text {
            position: absolute; bottom: -60px; width: 100%; text-align: center;
            font-family: 'Cinzel Decorative'; color: var(--gold);
            letter-spacing: 3px; animation: pulse 2s infinite;
        }

        /* --- SCENE 2: LANGUAGE GATE --- */
        #language-gate {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 9000; display: none;
            flex-direction: column; justify-content: center; align-items: center;
            backdrop-filter: blur(20px);
        }

        .lang-btn {
            background: transparent; border: 2px solid var(--gold); color: var(--gold);
            padding: 20px 50px; margin: 15px; font-size: 1.5rem;
            font-family: 'Cinzel Decorative', 'Ramabhadra'; border-radius: 10px;
            cursor: pointer; transition: 0.4s; width: 280px; text-transform: uppercase;
        }
        .lang-btn:hover { background: var(--gold); color: black; box-shadow: 0 0 40px var(--gold); }

        /* --- MAIN APP CONTENT --- */
        #main-app { 
            position: relative; z-index: 10; display: none; opacity: 0; 
            padding-bottom: 100px;
        }

        .hero {
            height: 100vh; display: flex; flex-direction: column; 
            justify-content: center; align-items: center; text-align: center;
            padding: 20px;
        }

        /* VIP Guest Photo */
        .vip-card {
            width: 180px; height: 180px; border-radius: 50%; 
            border: 4px solid var(--gold); margin-bottom: 20px;
            position: relative; display: none;
            box-shadow: 0 0 30px var(--gold);
        }
        .vip-card img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }
        
        .title-cinematic {
            font-family: 'Cinzel Decorative'; font-size: 3.2rem;
            background: linear-gradient(to bottom, #fff, var(--gold));
            -webkit-background-clip: text; color: transparent;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            margin-bottom: 10px; line-height: 1.1;
        }

        /* Scrolling Vines & Flowers */
        .vine-line {
            position: absolute; left: 50%; top: 100vh; bottom: 0; width: 2px;
            background: var(--gold); transform: translateX(-50%);
            z-index: -1; opacity: 0.3;
        }

        .event-card {
            background: var(--glass); border: 1px solid rgba(255,215,0,0.2);
            padding: 30px; border-radius: 20px; margin: 50px 20px;
            backdrop-filter: blur(10px); position: relative;
            transform: translateY(100px); opacity: 0;
            transition: all 0.8s;
        }

        .event-card.active { transform: translateY(0); opacity: 1; }

        /* Flower Bloom */
        .flower {
            position: absolute; left: -15px; top: -15px; font-size: 2rem;
            color: var(--gold); animation: bloom 2s forwards; opacity: 0;
        }

        .card-header { font-family: 'Cinzel Decorative'; font-size: 1.6rem; color: var(--gold); margin-bottom: 15px; }
        .card-body { font-size: 1.1rem; line-height: 1.8; color: #eee; }
        .highlight { color: #00ffcc; font-weight: bold; }

        /* --- ADMIN PANEL --- */
        #admin-panel {
            display: none; position: fixed; bottom: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 20000; padding: 20px; overflow-y: auto;
        }
        .admin-input { width: 100%; padding: 15px; margin-bottom: 15px; background: #111; border: 1px solid #333; color: white; border-radius: 5px; }
        .admin-btn { width: 100%; padding: 15px; background: var(--gold); font-weight: bold; cursor: pointer; border-radius: 5px; }

        @keyframes pulse { 0% { opacity: 0.4; } 50% { opacity: 1; } 100% { opacity: 0.4; } }
        @keyframes bloom { 0% { transform: scale(0); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

        footer { text-align: center; padding: 40px; color: #444; font-family: 'Cinzel Decorative'; cursor: pointer; }

        /* Mobile Adjustments */
        @media (max-width: 600px) {
            .title-cinematic { font-size: 2.2rem; }
            .event-card { padding: 20px; }
        }
    </style>
</head>
<body>

    <audio id="bgm" loop>
        <source src="https://cdn.pixabay.com/download/audio/2022/10/25/audio_10842a2754.mp3?filename=dark-mystery-trailer-115629.mp3" type="audio/mpeg">
    </audio>
    <audio id="open-sfx">
        <source src="https://cdn.pixabay.com/download/audio/2022/03/24/audio_3d15442656.mp3?filename=magic-spell-6005.mp3" type="audio/mpeg">
    </audio>

    <div class="moon"></div>
    <canvas id="snow-canvas"></canvas>
    <canvas id="fire-canvas"></canvas>

    <div id="invitation-cover">
        <div class="envelope" onclick="openEnvelope()">
            <div class="envelope-top"></div>
            <div class="seal">VIP</div>
            <div class="btn-open-text">TAP TO OPEN</div>
        </div>
    </div>

    <div id="language-gate">
        <h1 style="color:white; font-family:'Cinzel Decorative'; margin-bottom:30px;">Choose Your Journey</h1>
        <button class="lang-btn" onclick="startExperience('en')">English Experience</button>
        <button class="lang-btn" onclick="startExperience('te')">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å ‡∞Ö‡∞®‡±Å‡∞≠‡∞µ‡∞Ç</button>
    </div>

    <div id="main-app">
        <div class="vine-line"></div>
        <div class="container">
            
            <section class="hero">
                <div class="vip-card" id="vip-area">
                    <img id="vip-img" src="" alt="Guest Image">
                </div>
                
                <p id="wel-txt" style="color:var(--gold); font-family:'Great Vibes'; font-size:2rem; margin-bottom:10px;"></p>
                <h1 class="title-cinematic">THE OOTLANKA<br>LEGEND 2026</h1>
                <p style="letter-spacing:4px; font-size:0.9rem; opacity:0.7;">DECEMBER 31 // MUNIRATHNA FARM</p>
                
                <div style="margin-top:50px; animation: pulse 2s infinite; color:var(--gold);">
                    SCROLL TO EXPLORE THE SAGA ‚Üì
                </div>
            </section>

            <div class="event-card">
                <div class="flower">üå∏</div>
                <div class="card-header" id="h-journey">THE PILGRIMAGE</div>
                <div class="card-body">
                    <p id="p-bike">Bikes park at Venkojigaripalle Village.</p>
                    <p id="p-tractor" class="highlight" style="margin-top:10px;">THE TRACTOR CONVOY: 20 Members. ONE Tractor. Village to Forest. Maximum Chaos & Fun!</p>
                </div>
            </div>

            <div class="event-card">
                <div class="flower">üå∏</div>
                <div class="card-header" id="h-feast">FOREST FEAST</div>
                <div class="card-body">
                    <p id="p-cook1">7:30 PM: Woodfire Cooking starts (Chapati & Chicken/Veg Curry).</p>
                    <p id="p-dinner" style="margin-top:10px;">9:45 PM: The Grand Forest Dinner.</p>
                </div>
            </div>

            <div class="event-card">
                <div class="flower">üå∏</div>
                <div class="card-header" id="h-party">THE CELEBRATION</div>
                <div class="card-body" id="p-mic">
                    10:30 PM: Generator & DJ Lights ON.<br>
                    <span class="highlight">OPEN MIC:</span> Sharing our 2025 Heart-stories (Sad, Happy, Bad) with Music and Dance!
                </div>
            </div>

            <div class="event-card">
                <div class="flower">üå∏</div>
                <div class="card-header" id="h-mid">THE AWAKENING (2026)</div>
                <div class="card-body">
                    <p id="p-cake" style="font-size:1.4rem; color:var(--gold);">12:00 AM: CAKE CUTTING CELEBRATION!</p>
                    <p id="p-cook2" style="margin-top:10px; border-top:1px dashed rgba(255,215,0,0.3); padding-top:10px;">
                        <b>ROUND 2:</b> 2 Big Country Chickens (12kg). Cooking Biryani & Pakoda until 6:00 AM Sunrise.
                    </p>
                </div>
            </div>

            <div class="event-card" style="border-top: 4px solid red;">
                <div class="card-header" style="color:red;" id="h-rules">THE CODE OF CONDUCT</div>
                <div class="card-body">
                    <p id="p-strict">Zero Tolerance: Over-drinking, Fighting, Bullying. Pure Brotherhood Only.</p>
                    <p id="p-fee" style="margin-top:10px; color:var(--gold);">Entry: Min Rs. 300 (Maximum is your wish).</p>
                </div>
            </div>

            <footer id="admin-trigger">
                ¬© 2026 OOTLANKA FRIENDS
            </footer>
        </div>
    </div>

    <div id="admin-panel">
        <h2 style="color:var(--gold); margin-bottom:20px;">Invitation Generator</h2>
        <input type="text" id="a-name" class="admin-input" placeholder="Guest Name">
        <input type="file" id="a-photo" class="admin-input" accept="image/*">
        <div id="a-status" style="color:var(--gold); margin-bottom:10px;"></div>
        <button class="admin-btn" onclick="generateLink()">Create Invitation Link</button>
        
        <div id="a-result" style="display:none; margin-top:20px;">
            <p style="color:white;">Copy Link:</p>
            <textarea id="final-url" class="admin-input" style="height:80px;"></textarea>
            <button class="admin-btn" style="background:#444; color:white;" onclick="copyLink()">Copy to Clipboard</button>
        </div>
        <button onclick="document.getElementById('admin-panel').style.display='none'" style="margin-top:20px; color:#888; background:none; border:none; width:100%;">Close Admin</button>
    </div>

    <script>
        // --- CONTENT DICTIONARY ---
        const content = {
            en: {
                wel: "Welcome to the Saga, ",
                h_journey: "THE PILGRIMAGE",
                p_bike: "Bikes park at Venkojigaripalle Village (Friends' homes).",
                p_tractor: "THE TRACTOR CONVOY: All 20 members in ONE vehicle. Village to Ootlanka. Maximum Thrill!",
                h_feast: "FOREST FEAST",
                p_cook1: "7:30 PM: Woodfire Cooking starts (Chapati & Chicken/Veg Curry).",
                p_dinner: "9:45 PM: The Grand Forest Dinner.",
                h_party: "THE CELEBRATION",
                p_mic: "10:30 PM: Generator & DJ Lights ON.<br><span class='highlight'>OPEN MIC:</span> Sharing our 2025 Heart-stories (Sad, Happy, Bad) with Music and Dance!",
                h_mid: "THE AWAKENING (2026)",
                p_cake: "12:00 AM: CAKE CUTTING CELEBRATION!",
                p_cook2: "<b>ROUND 2:</b> 2 Big Country Chickens (12kg). Cooking Biryani & Pakoda until 6:00 AM Sunrise.",
                h_rules: "THE CODE OF CONDUCT",
                p_strict: "Zero Tolerance: No Fighting, No Bullying, No Over Drinking. Let's make it beautiful.",
                p_fee: "Entry: Min Rs. 300 (Max is your choice)."
            },
            te: {
                wel: "‡∞∏‡±ç‡∞µ‡∞æ‡∞ó‡∞§‡∞Ç, ",
                h_journey: "‡∞™‡±ç‡∞∞‡∞Ø‡∞æ‡∞£‡∞Ç - ‡∞™‡±ç‡∞≤‡∞æ‡∞®‡±ç",
                p_bike: "‡∞Æ‡∞® ‡∞¨‡±à‡∞ï‡±ç‚Äå‡∞≤‡∞®‡∞ø ‡∞µ‡±Ü‡∞Ç‡∞ï‡±ã‡∞ú‡∞ø‡∞ó‡∞æ‡∞∞‡∞ø‡∞™‡∞≤‡±ç‡∞≤‡±Ü‡∞≤‡±ã ‡∞∏‡±ç‡∞®‡±á‡∞π‡∞ø‡∞§‡±Å‡∞≤ ‡∞á‡∞≥‡±ç‡∞≤‡∞≤‡±ã ‡∞™‡±Ü‡∞ü‡±ç‡∞ü‡∞æ‡∞≤‡∞ø.",
                p_tractor: "‡∞ü‡±ç‡∞∞‡∞æ‡∞ï‡±ç‡∞ü‡∞∞‡±ç ‡∞Ø‡∞æ‡∞§‡±ç‡∞∞: ‡∞Ö‡∞Ç‡∞¶‡∞∞‡∞Ç ‡∞í‡∞ï‡±á ‡∞ü‡±ç‡∞∞‡∞æ‡∞ï‡±ç‡∞ü‡∞∞‡±ç‡∞≤‡±ã.. ‡∞Ö‡∞°‡∞µ‡∞ø‡∞ï‡∞ø ‡∞™‡∞Ø‡∞®‡∞Ç! ‡∞Æ‡∞ú‡∞æ ‡∞Æ‡∞æ‡∞Æ‡±Ç‡∞≤‡±Å‡∞ó‡∞æ ‡∞â‡∞Ç‡∞°‡∞¶‡±Å!",
                h_feast: "‡∞µ‡∞® ‡∞µ‡∞ø‡∞Ç‡∞¶‡±Å",
                p_cook1: "7:30 PM: ‡∞µ‡∞Ç‡∞ü ‡∞Æ‡±ä‡∞¶‡∞≤‡±Å (‡∞ï‡∞ü‡±ç‡∞ü‡±Ü‡∞≤ ‡∞™‡±ä‡∞Ø‡±ç‡∞Ø‡∞ø ‡∞Æ‡±Ä‡∞¶ ‡∞ö‡∞™‡∞æ‡∞§‡±Ä & ‡∞®‡∞æ‡∞ü‡±Å ‡∞ï‡±ã‡∞°‡∞ø).",
                p_dinner: "9:45 PM: ‡∞Ö‡∞Ç‡∞¶‡∞∞‡∞Ç ‡∞ï‡∞≤‡∞ø‡∞∏‡∞ø ‡∞µ‡∞® ‡∞≠‡±ã‡∞ú‡∞®‡∞Ç.",
                h_party: "‡∞∏‡∞Ç‡∞¨‡∞∞‡∞æ‡∞≤‡±Å",
                p_mic: "10:30 PM: DJ ‡∞≤‡±à‡∞ü‡±ç‡∞≤‡±Å & ‡∞ú‡∞®‡∞∞‡±á‡∞ü‡∞∞‡±ç ‡∞Ü‡∞®‡±ç.<br><span class='highlight'>‡∞ì‡∞™‡±Ü‡∞®‡±ç ‡∞Æ‡±à‡∞ï‡±ç:</span> ‡∞°‡±ç‡∞Ø‡∞æ‡∞®‡±ç‡∞∏‡±ç, ‡∞™‡∞æ‡∞ü‡∞≤‡±Å.. 2025 ‡∞Æ‡∞® ‡∞ï‡∞∑‡±ç‡∞ü ‡∞∏‡±Å‡∞ñ‡∞æ‡∞≤‡±Å ‡∞Æ‡±à‡∞ï‡±ç ‡∞≤‡±ã ‡∞™‡∞Ç‡∞ö‡±Å‡∞ï‡±Å‡∞Ç‡∞¶‡∞æ‡∞Ç.",
                h_mid: "‡∞®‡±Ç‡∞§‡∞® ‡∞∏‡∞Ç‡∞µ‡∞§‡±ç‡∞∏‡∞∞‡∞Ç 2026",
                p_cake: "12:00 AM: ‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞∏‡∞Ç‡∞µ‡∞§‡±ç‡∞∏‡∞∞‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞ï‡±á‡∞ï‡±ç ‡∞ï‡∞ü‡∞ø‡∞Ç‡∞ó‡±ç!",
                p_cook2: "<b>‡∞∞‡±Ü‡∞Ç‡∞°‡∞µ ‡∞∞‡±å‡∞Ç‡∞°‡±ç:</b> 2 ‡∞™‡±Ü‡∞¶‡±ç‡∞¶ ‡∞®‡∞æ‡∞ü‡±Å ‡∞ï‡±ã‡∞≥‡±ç‡∞≤‡±Å (12kg). ‡∞§‡±Ü‡∞≤‡±ç‡∞≤‡∞µ‡∞æ‡∞∞‡±ç‡∞≤‡±Å ‡∞¨‡∞ø‡∞∞‡±ç‡∞Ø‡∞æ‡∞®‡±Ä & ‡∞™‡∞ï‡±ã‡∞°‡∞æ ‡∞µ‡∞Ç‡∞°‡±Å‡∞ï‡±Å‡∞®‡∞ø ‡∞§‡∞ø‡∞®‡∞°‡∞Æ‡±á!",
                h_rules: "‡∞®‡∞ø‡∞Ø‡∞Æ‡∞æ‡∞≤‡±Å",
                p_strict: "‡∞ó‡±ä‡∞°‡∞µ‡∞≤‡±Å, ‡∞π‡±á‡∞≥‡∞®‡∞≤‡±Å, ‡∞Ö‡∞§‡∞ø‡∞ó‡∞æ ‡∞§‡∞æ‡∞ó‡∞°‡∞Ç ‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø‡∞ó‡∞æ ‡∞®‡∞ø‡∞∑‡±á‡∞ß‡∞Ç. ‡∞ó‡±å‡∞∞‡∞µ‡∞Ç‡∞ó‡∞æ ‡∞™‡∞æ‡∞∞‡±ç‡∞ü‡±Ä ‡∞ö‡±á‡∞∏‡±Å‡∞ï‡±Å‡∞Ç‡∞¶‡∞æ‡∞Ç.",
                p_fee: "‡∞ö‡∞Ç‡∞¶‡∞æ: ‡∞ï‡∞®‡±Ä‡∞∏‡∞Ç ‡∞∞‡±Ç. 300 (‡∞Æ‡±Ä ‡∞á‡∞∑‡±ç‡∞ü‡∞Ç)."
            }
        };

        let compressedImg = "";

        // --- CORE LOGIC ---
        function openEnvelope() {
            document.getElementById('open-sfx').play();
            const env = document.querySelector('.envelope');
            env.classList.add('open');
            
            setTimeout(() => {
                gsap.to('#invitation-cover', { opacity: 0, duration: 1, onComplete: () => {
                    document.getElementById('invitation-cover').style.display = 'none';
                    document.getElementById('language-gate').style.display = 'flex';
                }});
            }, 800);
        }

        function startExperience(lang) {
            // Start BGM
            const bgm = document.getElementById('bgm');
            bgm.volume = 0.5;
            bgm.play();

            // Setup Data
            const t = content[lang];
            const urlP = new URLSearchParams(window.location.search);
            const guest = urlP.get('guest');
            const pic = urlP.get('pic');

            if(guest) document.getElementById('wel-txt').innerText = t.wel + decodeURIComponent(guest);
            if(pic) {
                document.getElementById('vip-area').style.display = 'block';
                document.getElementById('vip-img').src = decodeURIComponent(pic);
            }

            // Fill Content
            document.getElementById('h-journey').innerText = t.h_journey;
            document.getElementById('p-bike').innerText = t.p_bike;
            document.getElementById('p-tractor').innerHTML = t.p_tractor;
            document.getElementById('h_feast').innerText = t.h_feast;
            document.getElementById('p-cook1').innerHTML = t.p_cook1;
            document.getElementById('p-dinner').innerHTML = t.p_dinner;
            document.getElementById('h-party').innerText = t.h_party;
            document.getElementById('p-mic').innerHTML = t.p_mic;
            document.getElementById('h-mid').innerText = t.h_mid;
            document.getElementById('p-cake').innerHTML = t.p_cake;
            document.getElementById('p-cook2').innerHTML = t.p_cook2;
            document.getElementById('h-rules').innerText = t.h_rules;
            document.getElementById('p-strict').innerText = t.p_strict;
            document.getElementById('p-fee').innerText = t.p_fee;

            // Transition
            gsap.to('#language-gate', { opacity: 0, duration: 0.8, onComplete: () => {
                document.getElementById('language-gate').style.display = 'none';
                document.body.style.overflow = 'auto';
                const app = document.getElementById('main-app');
                app.style.display = 'block';
                gsap.to(app, { opacity: 1, duration: 1.5 });
                
                triggerScrollAnimations();
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            }});
        }

        function triggerScrollAnimations() {
            gsap.utils.toArray('.event-card').forEach(card => {
                ScrollTrigger.create({
                    trigger: card,
                    start: "top 85%",
                    onEnter: () => {
                        card.classList.add('active');
                        gsap.fromTo(card.querySelector('.flower'), {scale:0}, {scale:1, opacity:1, duration:0.5});
                    }
                });
            });
        }

        // --- BACKGROUND FX ---
        function initBackground() {
            // Snow
            const sc = document.getElementById('snow-canvas');
            const sctx = sc.getContext('2d');
            sc.width = window.innerWidth; sc.height = window.innerHeight;
            const flakes = [];
            for(let i=0; i<100; i++) flakes.push({x:Math.random()*sc.width, y:Math.random()*sc.height, r:Math.random()*2, d:Math.random()*1});

            // Fire
            const fc = document.getElementById('fire-canvas');
            const fctx = fc.getContext('2d');
            fc.width = window.innerWidth; fc.height = window.innerHeight;
            const particles = [];
            
            function animate() {
                // Snow draw
                sctx.clearRect(0,0,sc.width, sc.height);
                sctx.fillStyle = "white";
                sctx.beginPath();
                flakes.forEach(f => {
                    f.y += f.d; if(f.y > sc.height) f.y = 0;
                    sctx.moveTo(f.x, f.y); sctx.arc(f.x, f.y, f.r, 0, Math.PI*2);
                });
                sctx.fill();

                // Fire draw (Simplistic)
                fctx.clearRect(0,0,fc.width, fc.height);
                fctx.globalCompositeOperation = "lighter";
                if(particles.length < 50) particles.push({x:fc.width/2 + (Math.random()*60-30), y:fc.height-20, s:Math.random()*20, v:Math.random()*2});
                particles.forEach((p, i) => {
                    p.y -= p.v; p.s *= 0.96;
                    fctx.beginPath(); fctx.arc(p.x, p.y, p.s, 0, Math.PI*2);
                    fctx.fillStyle = `rgba(255, ${Math.random()*100}, 0, 0.5)`;
                    fctx.fill();
                    if(p.s < 1) particles.splice(i, 1);
                });

                requestAnimationFrame(animate);
            }
            animate();
        }
        initBackground();

        // --- ADMIN FUNCTIONS ---
        let adminClicks = 0;
        document.getElementById('admin-trigger').addEventListener('click', () => {
            adminClicks++;
            if(adminClicks === 3) {
                document.getElementById('admin-panel').style.display = 'block';
                adminClicks = 0;
            }
            setTimeout(() => adminClicks = 0, 2000);
        });

        document.getElementById('a-photo').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if(!file) return;
            document.getElementById('a-status').innerText = "Processing Photo...";
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = function(event) {
                const img = new Image();
                img.src = event.target.result;
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const MAX = 200;
                    let w = img.width, h = img.height;
                    if(w > h) { if(w > MAX) { h *= MAX/w; w = MAX; } }
                    else { if(h > MAX) { w *= MAX/h; h = MAX; } }
                    canvas.width = w; canvas.height = h;
                    canvas.getContext('2d').drawImage(img, 0, 0, w, h);
                    compressedImg = canvas.toDataURL('image/jpeg', 0.6);
                    document.getElementById('a-status').innerText = "Photo Ready!";
                }
            }
        });

        function generateLink() {
            const name = document.getElementById('a-name').value;
            if(!name) return alert("Enter Guest Name");
            let url = window.location.href.split('?')[0] + `?guest=${encodeURIComponent(name)}`;
            if(compressedImg) url += `&pic=${encodeURIComponent(compressedImg)}`;
            document.getElementById('a-result').style.display = 'block';
            document.getElementById('final-url').value = url;
        }

        function copyLink() {
            const copyText = document.getElementById('final-url');
            copyText.select();
            document.execCommand("copy");
            alert("Invitation Link Copied!");
        }
    </script>
</body>
</html>
